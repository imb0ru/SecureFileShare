# ============================================
# SecureFileShare - Variabili d'Ambiente
# ============================================
#
# ISTRUZIONI:
# 1. Copia questo file in .env
# 2. Modifica i valori con credenziali sicure
# 3. NON committare .env nel repository!
#
# GENERA PASSWORD SICURE:
#   openssl rand -base64 32
#
# ============================================

# ------------------------------------------
# MySQL
# ------------------------------------------
MYSQL_ROOT_PASSWORD=CAMBIAMI_password_root
MYSQL_DATABASE=secure_file_share
MYSQL_USER=secure_app_user
MYSQL_PASSWORD=CAMBIAMI_password_app

# ------------------------------------------
# Vault
# ------------------------------------------
# Indirizzo Vault (Docker: http://localhost:8200)
VAULT_ADDR=http://localhost:8200

# Generato automaticamente al primo avvio.
# Dopo `docker-compose up -d`, recuperalo con:
#   cat vault/generated-token.txt
VAULT_TOKEN=

# ------------------------------------------
# Chiave AES per cifratura (256-bit)
# ------------------------------------------
# Se vuoto, viene generata automaticamente.
# Per generare manualmente: openssl rand -base64 32
AES_ENCRYPTION_KEY=

# ------------------------------------------
# Upload
# ------------------------------------------
# Path relativo: salvato in {user.home}/SecureFileShare/{path}
# Path assoluto: usato direttamente
UPLOAD_DIRECTORY=uploads

# Dimensione massima file in bytes (1 MB = 1048576)
UPLOAD_MAX_SIZE=1048576

# ------------------------------------------
# Validazione Input
# ------------------------------------------
PASSWORD_MIN_LENGTH=12
PASSWORD_MAX_LENGTH=128
EMAIL_MAX_LENGTH=254

# ------------------------------------------
# File Upload - Whitelist
# ------------------------------------------
# Estensioni consentite (separate da virgola)
FILE_ALLOWED_EXTENSIONS=.txt

# MIME types consentiti (separati da virgola)
FILE_ALLOWED_MIMETYPES=text/plain

# Buffer size per lettura file in bytes
FILE_BUFFER_SIZE=8192

# ------------------------------------------
# Sessione e Cookie
# ------------------------------------------
# Timeout sessione in secondi (900 = 15 minuti)
SESSION_TIMEOUT=900

# Cookie flags (true/false)
COOKIE_SECURE=true
COOKIE_HTTPONLY=true

# SameSite: Strict, Lax, None
COOKIE_SAMESITE=Strict

# ------------------------------------------
# HSTS (HTTP Strict Transport Security)
# ------------------------------------------
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# ------------------------------------------
# Sicurezza Password (PBKDF2)
# ------------------------------------------
PBKDF2_ITERATIONS=310000
SALT_LENGTH=16
KEY_LENGTH=256

# ------------------------------------------
# CSP Nonce
# ------------------------------------------
NONCE_LENGTH=16
